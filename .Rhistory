for (yy in (out$y[i]-buffer):(out$y[i]+buffer)) {
zdist <- dtm[xidx[i],yidx[i]]+out$z[i] - (dtm[xx-Xmin,yy-Ymin]+sensor_ht)
xydist <- sqrt((out$x[i]-xx)^2+(out$y[i]-yy)^2)
#print(zdist)
#print(xydist)
}
}
shiny::runApp('C:/Users/lucy_/bats/circuitscape/shiny/src')
runApp('C:/Users/lucy_/bats/circuitscape/shiny/src')
runApp('C:/Users/lucy_/bats/circuitscape/shiny/src')
runApp('C:/Users/lucy_/bats/circuitscape/shiny/src')
runApp('C:/Users/lucy_/bats/circuitscape/shiny/src')
runApp('C:/Users/lucy_/bats/circuitscape/shiny/src')
runApp('C:/Users/lucy_/bats/circuitscape/shiny/src')
runApp('C:/Users/lucy_/bats/circuitscape/shiny/src')
runApp('C:/Users/lucy_/bats/circuitscape/shiny/src')
runApp('C:/Users/lucy_/bats/circuitscape/shiny/src')
xs <- c(3,9.5,16.5,23,29.5,38.5,44.5,50.8,60,66,75.5,81.5,91,97.5,104,111.5,118,124,133)
ys <- c(rep(2.5,19), rep(6.5,19), rep(15,19), rep(18.5,19))
xs <- rep(xs,4)
seat_locations <- read.csv(file="seat_locations")
seat_locations <- read.csv(file="seat_locations.csv")
list.files()
setwd("C:/Users/lucy_/covid-recovery/")
seat_locations <- read.csv(file="seat_locations.csv")
seat_locations
seat_locations <- read.csv(file="seat_locations.csv")
xs <- c(rep(3,4),rep(9.5,4),rep(16.5,4),rep(23,4),rep(29.5,4),rep(38.5,4),rep(44.5,4),rep(50.8,4),rep(60,4),rep(66,4),rep(75.5,4),rep(81.5,4),rep(91,4),rep(97.5,4),rep(104,4),rep(111.5,4),rep(118,4),rep(124,4),rep(133,4))
ys <- c(rep(2.5,6.5,15,18.5),19)
seat_locations$x_diag <- xs
seat_locations$y_diag <- ys
ys
ys <- rep(c(2.5,6.5,15,18.5),19)
seat_locations$y_diag <- ys
seat_locations
write.csv(seat_locations,"seat_locations.csv",overwrite=TRUE)
write.csv(seat_locations,"seat_locations.csv")
write.csv(seat_locations,"seat_locations.csv")
seat_locations <- read.csv(file="seat_locations.csv")
seat_locations
seat_locations[1]
seat_locations <- read.csv(file="seat_locations.csv")
seat_locations[1]
seat_locations[2]
shiny::runApp('app')
nodes <- cbind(seat_locations$x,seat_locations$y)
nodes
nodes[1,1]
nodes[1,2]
nodes[2,2]
nrow(seat_locations)
seat_locations[,1]
seat_locations[1,]
max_seats <- n_row(seat_locations)
max_seats <- nrow(seat_locations)
accepted_seats <- 1:max_seats
for (i in 1:max_seats) {
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[end]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius && m != i) {
accepted_seats <- accepted_seats[accepted_seats$n!=m]
}
}
}
}
accepted_seats[end]
accepted_seats[length(accapted_seats[,1]),]
accepted_seats[length(accepted_seats[,1]),]
accepted_seats
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius && m != i) {
accepted_seats <- accepted_seats[accepted_seats$n!=m]
}
}
for (i in 1:max_seats) {
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius && m != i) {
accepted_seats <- accepted_seats[accepted_seats$n!=m]
}
}
}
}
for (i in 1:max_seats) {
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius && m != i) {
accepted_seats <- accepted_seats[!m]
}
}
}
}
for (i in 1:max_seats) {
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius) {
accepted_seats <- accepted_seats[!m]
}
}
}
}
1<2 && 1 != 3
for (i in 1:max_seats) {
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
print((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i)
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
accepted_seats <- accepted_seats[!m]
}
}
}
}
max_seats <- nrow(seat_locations)
accepted_seats <- 1:max_seats
for (i in 1:max_seats) {
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
print((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i)
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
accepted_seats <- accepted_seats[!m]
}
}
}
}
max_seats <- nrow(seat_locations)
accepted_seats <- 1:max_seats
for (i in 1:max_seats) {
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
print((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2)
print(m)
print((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i)
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
accepted_seats <- accepted_seats[!m]
}
}
}
}
max_seats <- nrow(seat_locations)
accepted_seats <- 1:max_seats
for (i in 1:max_seats) {
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
print((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2< radius)
print(m)
print((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i)
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
accepted_seats <- accepted_seats[!m]
}
}
}
}
for (i in 1:max_seats) {
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
print(fixed_seat)
print(trial_seat)
print((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2< radius)
print(m)
print((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i)
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
accepted_seats <- accepted_seats[!m]
}
}
}
}
max_seats <- nrow(seat_locations)
accepted_seats <- 1:max_seats
for (i in 1:max_seats) {
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
print(fixed_seat)
print(trial_seat)
print((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2< radius)
print(m)
print((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i)
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
accepted_seats <- accepted_seats[!m]
}
}
}
}
max_seats <- nrow(seat_locations)
accepted_seats <- 1:max_seats
nremove <- c()
for (i in 1:max_seats) {
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
print(fixed_seat)
print(trial_seat)
print((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2< radius)
print(m)
print((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i)
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
nremove <- c(nremove,m)
}
}
}
}
max_seats <- nrow(seat_locations)
accepted_seats <- 1:max_seats
nremove <- c()
for (i in 1:max_seats) {
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
nremove <- c(nremove,m)
}
}
}
}
nremove
for (i in 1:max_seats) {
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
nremove <- c(nremove,m)
}
}
print(nremove)
}
}
max_seats <- nrow(seat_locations)
accepted_seats <- 1:max_seats
for (i in 1:max_seats) {
nremove <- c()
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
nremove <- c(nremove,m)
}
}
print(nremove)
}
}
for (i in 1:max_seats) {
nremove <- c()
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
nremove <- c(nremove,m)
}
}
accepted_seats <- accepted_seats[!nremove]
}
}
accepted_seats
for (i in 1:max_seats) {
print(accepted_seats)
nremove <- c()
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
nremove <- c(nremove,m)
}
}
}
accepted_seats <- accepted_seats[!nremove]
}
max_seats <- nrow(seat_locations)
accepted_seats <- 1:max_seats
for (i in 1:max_seats) {
print(accepted_seats)
nremove <- c()
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
nremove <- c(nremove,m)
}
}
}
accepted_seats <- accepted_seats[!nremove]
}
for (i in 1:max_seats) {
print(accepted_seats)
nremove <- c()
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
nremove <- c(nremove,m)
}
}
}
print(nremove)
accepted_seats <- accepted_seats[!nremove]
}
for (i in 1:max_seats) {
print(accepted_seats)
nremove <- c()
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
nremove <- c(nremove,m)
}
}
}
print(nremove)
if (length(nremove) > 0) {
accepted_seats <- accepted_seats[!nremove]
}
}
accepted_seats <- 1:max_seats
for (i in 1:max_seats) {
print(accepted_seats)
nremove <- c()
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
nremove <- c(nremove,m)
}
}
}
print(nremove)
if (length(nremove) > 0) {
accepted_seats <- accepted_seats[!nremove]
}
}
max_seats <- nrow(seat_locations)
accepted_seats <- 1:max_seats
for (i in 1:max_seats) {
print(accepted_seats)
nremove <- c()
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
nremove <- c(nremove,m)
}
}
print(nremove)
if (length(nremove) > 0) {
accepted_seats <- accepted_seats[!nremove]
}
}
}
nremove
nremove <- 1,2,4
nremove <- c(1,2,4)
accepted_seats
accepted_seats <- 1:max_seats
accepted_seats[!nremove]
accepted_seats <- 1:max_seats
for (i in 1:max_seats) {
print(accepted_seats)
nremove <- c()
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
nremove <- c(nremove,m)
}
}
print(nremove)
if (length(nremove) > 0) {
accepted_seats <- accepted_seats[-nremove]
}
}
}
accepted_seats
seats <- seat_locations[accepted_seats,]
seats
remove_seats(seat_locations,radius)
remove_seats <- function(seat_locations,radius) {
accepted_seats <- 1:nrow(seat_locations)
for (i in 1:max_seats) {
nremove <- c()
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
nremove <- c(nremove,m)
}
}
if (length(nremove) > 0) {
accepted_seats <- accepted_seats[-nremove]
}
}
}
seat_locations[accepted_seats,]
}
remove_seats(seat_locations,radius)
runApp('app')
runApp('app')
runApp('app')
seat_locations <- read.csv(file="seat_locations.csv")
accepted_seats <- 1:nrow(seat_locations)
for (i in accepted_seats) {
nremove <- c()
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
nremove <- c(nremove,m)
}
}
if (length(nremove) > 0) {
accepted_seats <- accepted_seats[-nremove]
}
}
}
seat_locations[accepted_seats,]
plot(seat_locations$x,seat_locations$y)
plot(seats$x,seats$y)
seats <- seat_locations[accepted_seats,]
plot(seats$x,seats$y)
accepted_seats <- 1:nrow(seat_locations)
seat_locations <- read.csv(file="seat_locations.csv")
accepted_seats <- 1:nrow(seat_locations)
for (i in 1:nrow(seat_locations)) {
nremove <- c()
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
print(fixed_seat)
print(trial_seat)
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
nremove <- c(nremove,m)
}
}
if (length(nremove) > 0) {
accepted_seats <- accepted_seats[-nremove]
}
}
}
seats <- seat_locations[accepted_seats,]
plot(seat_locations$x,seat_locations$y)
plot(seats$x,seats$y)
for (i in 1:nrow(seat_locations)) {
nremove <- c()
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
nremove <- c(nremove,m)
}
}
if (length(nremove) > 0) {
accepted_seats <- accepted_seats[accepted_seats!=nremove]
}
}
}
seat_locations <- read.csv(file="seat_locations.csv")
accepted_seats <- 1:nrow(seat_locations)
for (i in 1:nrow(seat_locations)) {
nremove <- c()
if (i <= length(accepted_seats)) {
for (m in accepted_seats[i]:accepted_seats[length(accepted_seats)]) {
fixed_seat <- c(seat_locations$x[accepted_seats[i]],seat_locations$y[accepted_seats[i]])
trial_seat <- c(seat_locations$x[m],seat_locations$y[m])
if ((fixed_seat[1]-trial_seat[1])^2+(fixed_seat[2]-trial_seat[2])^2 < radius  && m != i) {
nremove <- c(nremove,m)
}
}
for (xs in nremove) {
accepted_seats <- accepted_seats[accepted_seats!=xs]
}
}
}
seats <- seat_locations[accepted_seats,]
plot(seat_locations$x,seat_locations$y)
plot(seats$x,seats$y)
source('C:/Users/lucy_/covid-recovery/app/src.R')
runApp('app')
runApp('app')
